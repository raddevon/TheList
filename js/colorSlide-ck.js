// TODO: This whole thing is broke as a joke. Fix it by rewriting.
(function(e){e.fn.colorSlide=function(){return this.each(function(){var t=e(this),n=t.closest("li"),r=n.outerWidth(),i=n.outerHeight(),s=n.css("border-left-color");n.find("a").css({position:"relative","z-index":51});var o=e('<div class="color-slider"></div>');o.css({background:s,width:0,height:i,position:"absolute",top:0,left:0,"z-index":50}).appendTo(n);var u=function(e){e.find(".color-slider").css("width",r)},a=function(e){e.find(".color-slider").css("width",0)},f=function(e){var t=e.find(".color-slider");t.css("width")>0?a(e):u(e)},l=function(){t.on("mouseenter",function(){u(n)})},c=function(){t.on("mouseleave",function(){a(n)})},h=function(){n.on("activated",function(){t.unbind("mouseleave");n.siblings().trigger("deactivated");u(n)})},p=function(){n.on("deactivated",function(){n.removeClass("active");t.bind("mouseleave",function(){a(n)});a(n)})};l();c();h();p()})}})(jQuery);